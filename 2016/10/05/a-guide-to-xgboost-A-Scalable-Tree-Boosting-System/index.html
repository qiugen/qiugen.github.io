<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="enjoy"><title>XGboost: A Scalable Tree Boosting System论文及源码导读 | 水滴石穿</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">XGboost: A Scalable Tree Boosting System论文及源码导读</h1><a id="logo" href="/.">水滴石穿</a><p class="description">探索，保持渴望，无所畏惧</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">XGboost: A Scalable Tree Boosting System论文及源码导读</h1><div class="post-meta">Oct 5, 2016<span> | </span><span class="category"><a href="/categories/机器学习/">机器学习</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="2016/10/05/a-guide-to-xgboost-A-Scalable-Tree-Boosting-System/" href="/2016/10/05/a-guide-to-xgboost-A-Scalable-Tree-Boosting-System/#comments" class="ds-thread-count"></a><div class="post-content"><p>&#x8FD9;&#x7BC7;&#x8BBA;&#x6587;&#x4E00;&#x4F5C;&#x4E3A;&#x9648;&#x5929;&#x9F50;&#xFF0C;XGBoost&#x662F;&#x4ECE;&#x7ADE;&#x8D5B;pk&#x4E2D;&#x8131;&#x9896;&#x800C;&#x51FA;&#x7684;&#x7B97;&#x6CD5;&#xFF0C;&#x76EE;&#x524D;&#x5F00;&#x6E90;&#x5728;<a href="https://github.com/dmlc/xgboost" target="_blank" rel="external">github</a>&#xFF0C;&#x548C;&#x4F20;&#x7EDF;gbdt&#x65B9;&#x5F0F;&#x4E0D;&#x540C;&#xFF0C;XGBoost&#x5BF9;<em>loss function</em>&#x8FDB;&#x884C;&#x4E86;&#x4E8C;&#x9636;&#x7684;&#x6CF0;&#x52D2;&#x5C55;&#x5F00;&#xFF0C;&#x5E76;&#x589E;&#x52A0;&#x4E86;&#x6B63;&#x5219;&#x9879;&#xFF0C;&#x7528;&#x4E8E;&#x6743;&#x8861;&#x76EE;&#x6807;&#x51FD;&#x6570;&#x7684;&#x4E0B;&#x964D;&#x548C;&#x6A21;&#x578B;&#x7684;&#x590D;&#x6742;&#x5EA6;[12]&#x3002;&#x7F57;&#x5217;&#x4E0B;&#x4F18;&#x52BF;&#xFF1A;</p>
<ol>
<li>&#x53EF;&#x6269;&#x5C55;&#x6027;&#x5F3A;</li>
<li>&#x4E3A;&#x7A00;&#x758F;&#x6570;&#x636E;&#x8BBE;&#x8BA1;&#x7684;&#x51B3;&#x7B56;&#x6811;&#x8BAD;&#x7EC3;&#x65B9;&#x6CD5;</li>
<li>&#x7406;&#x8BBA;&#x4E0A;&#x5F97;&#x5230;&#x9A8C;&#x8BC1;&#x7684;&#x52A0;&#x6743;&#x5206;&#x4F4D;&#x6570;&#x7565;&#x56FE;&#x6CD5;</li>
<li>&#x5E76;&#x884C;&#x548C;&#x5206;&#x5E03;&#x5F0F;&#x8BA1;&#x7B97;</li>
<li>&#x8BBE;&#x8BA1;&#x9AD8;&#x6548;&#x6838;&#x5916;&#x8BA1;&#x7B97;&#xFF0C;&#x8FDB;&#x884C;cache-aware&#x6570;&#x636E;&#x5757;&#x5904;&#x7406;</li>
</ol>
<p>&#x5206;&#x5E03;&#x5F0F;&#x8BAD;&#x7EC3;&#x6811;&#x6A21;&#x578B;boosting&#x65B9;&#x6CD5;&#x5DF2;&#x6709;[1,2,3]&#x3002;</p>
<h4 id="&#x6574;&#x4F53;&#x76EE;&#x6807;"><a href="#&#x6574;&#x4F53;&#x76EE;&#x6807;" class="headerlink" title="&#x6574;&#x4F53;&#x76EE;&#x6807;"></a>&#x6574;&#x4F53;&#x76EE;&#x6807;</h4>$$L\left( \phi  \right) = \sum\limits_i {l\left( {{{y_i},{\hat y}_i}} \right)}  + \sum\limits_k {\Omega \left( {{f_k}} \right)} $$
<p>&#x5176;&#x4E2D;$L\left(  \cdot  \right)$&#x4E3A;&#x76EE;&#x6807;&#x51FD;&#x6570;&#xFF0C;$l(\cdot)$&#x662F;&#x635F;&#x5931;&#x51FD;&#x6570;&#xFF0C;&#x901A;&#x5E38;&#x662F;&#x51F8;&#x51FD;&#x6570;&#xFF0C;&#x7528;&#x4E8E; &#x523B;&#x753B;&#x9884;&#x6D4B;&#x503C;${{{\hat y}_i}}$&#x548C;&#x771F;&#x5B9E;&#x503C;${{y_i}}$&#x7684;&#x5DEE;&#x5F02;&#xFF0C;&#x7B2C;&#x4E8C;&#x9879;$\Omega \left(  \cdot  \right)$&#x4E3A;&#x6A21;&#x578B;&#x7684;&#x6B63;&#x5219;&#x5316;&#x9879;&#xFF0C; &#x7528;&#x4E8E;&#x964D;&#x4F4E;&#x6A21;&#x578B;&#x7684;&#x590D;&#x6742;&#x5EA6;&#xFF0C;&#x51CF;&#x8F7B;&#x8FC7;&#x62DF;&#x5408;&#x95EE;&#x9898;&#xFF0C;&#x7C7B;&#x4F3C;&#x7684;&#x6B63;&#x5219;&#x5316;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x5728;&#x5F15;&#x6587;[4]&#x770B;&#x5230;&#x3002;&#x6A21;&#x578B;&#x76EE;&#x6807;&#x662F;&#x6700;&#x5C0F;&#x5316;&#x76EE;&#x6807;&#x51FD;&#x6570;&#x3002;<br>$L\left(  \cdot  \right)$&#x4E3A;&#x51FD;&#x6570;&#x7A7A;&#x95F4;&#x4E0A;&#x7684;&#x8868;&#x8FBE;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x8F6C;&#x6362;&#x4E3A;&#x4E0B;&#x9762;&#x8FD9;&#x5F20;<em>gradient boosting</em>&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x8BB0;${\hat y}^{(t)}_i$&#x4E3A;&#x7B2C;$i$&#x4E2A;&#x6837;&#x672C;&#x7B2C;$t$&#x8F6E;&#x8FED;&#x4EE3;&#xFF1A;<br>$${L^{\left( t \right)}} = \sum\limits_{i = 1}^n {l\left( {{y_i},{{\hat y}_i}^{\left( {t - 1} \right)} + {f_t}\left( {{{\bf{x}}_i}} \right)} \right)}  + \Omega \left( {{f_t}} \right)$$<br>&#x5BF9;&#x8BE5;&#x51FD;&#x6570;&#x5728;${\hat y}^{(t)}_i$&#x4F4D;&#x7F6E;&#x8FDB;&#x884C;&#x4E8C;&#x9636;&#x6CF0;&#x52D2;&#x5C55;&#x5F00;&#xFF0C;&#x53EF;&#x4EE5;&#x52A0;&#x901F;&#x4F18;&#x5316;&#x8FC7;&#x7A0B;&#xFF0C;&#x6211;&#x4EEC;&#x5F97;&#x5230;&#x76EE;&#x6807;&#x51FD;&#x6570;&#x7684;&#x8FD1;&#x4F3C;&#xFF1A;<br>$${L^{\left( t \right)}} \simeq \sum\limits_{i = 1}^n {\left[ {l\left( {{y_i},{{\hat y}^{\left( {t - 1} \right)}}} \right) + {g_i}{f_t}\left( {{{\bf{x}}_i}} \right) + {1 \over 2}{h_i}f_t^2\left( {{{\bf{x}}_i}} \right)} \right]}  + \Omega \left( {{f_t}} \right)$$<br>&#x6CF0;&#x52D2;&#x5C55;&#x5F00;&#x7684;&#x63A8;&#x5BFC;&#x90E8;&#x5206;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x601D;&#x8003;1&#xFF0C;&#x5176;&#x4E2D;&#x7B2C;&#x4E00;&#x9879;&#x662F;&#x5E38;&#x6570;&#x9879;&#xFF0C;&#x5220;&#x9664;&#x53EF;&#x5F97;&#xFF1A;<br>$${{\tilde L}^{\left( t \right)}} = \sum\limits_{i = 1}^n {\left[ {{g_i}{f_t}\left( {{{\bf{x}}_i}} \right) + {1 \over 2}{h_i}f_t^2\left( {{{\bf{x}}_i}} \right)} \right]}  + \Omega \left( {{f_t}} \right)--(1)$$<br>&#x4E0B;&#x9762;&#x5BF9;&#x6B63;&#x5219;&#x5316;&#x9879;&#x8FDB;&#x884C;&#x53C2;&#x6570;&#x5316;&#x5B9A;&#x4E49;&#x3002;&#x5EF6;&#x7EED;&#x524D;&#x6587;GBDT&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x5F15;&#x5165;&#x5206;&#x88C2;&#x8282;&#x70B9;$j$&#x5B9A;&#x4E49;&#x7684;&#x533A;&#x57DF;&#x8BB0;&#x4F5C;$${I_j} = \left\{ {i|q\left( {{{\bf{x}}_i}} \right) = j} \right\}$$<br>&#x90A3;&#x4E48;$\Omega$&#x5C55;&#x5F00;&#x539F;&#x76EE;&#x6807;&#x51FD;&#x6570;&#x6539;&#x5199;&#x4E3A;&#xFF1A;<br>$$\eqalign{
  &amp; {{\tilde L}^{\left( t \right)}} = \sum\limits_{i = 1}^n {\left[ {{g_i}{f_t}\left( {{{\bf{x}}_i}} \right) + {1 \over 2}{h_i}f_t^2\left( {{{\bf{x}}_i}} \right)} \right]}  + \gamma T + {1 \over 2}\lambda \sum\limits_{j = 1}^T {w_j^2}   \cr 
  &amp; \;\;\;\;\;{\rm{ = }}\sum\limits_{j = 1}^T {\left[ {\left( {\sum\limits_{i \in {I_j}} {{g_i}} } \right){w_j} + {1 \over 2}\left( {\sum\limits_{i \in {I_j}} {{h_i}}  + \lambda } \right)w_j^2} \right]}  + \gamma T \cr} --(2)$$<br> &#x5BF9;&#x4E8E;&#x56FA;&#x5B9A;&#x7684;&#x6811;&#x7ED3;&#x6784;$q(x)$&#xFF0C;&#x5BF9;$w_j$&#x6C42;&#x5BFC;&#x5F97;&#x89E3;&#x6790;&#x89E3;$w^*_j$:<br> $$w_j^* = {{\sum\limits_{i \in {I_j}} {{g_i}} } \over {\sum\limits_{i \in {I_j}} {{h_i} + \lambda } }}$$<br>&#x4EE3;&#x5165;&#x5230;$(1)$&#x5F0F;&#x4E2D;&#xFF0C;&#x53EF;&#x5F97;<br>$${{\tilde L}^{\left( t \right)}}\left( q \right) =  - {1 \over 2}{{{{\left( {\sum\limits_{i \in {I_j}} {{g_i}} } \right)}^2}} \over {\sum\limits_{i \in {I_j}} {{h_i} + \lambda } }} + \gamma T--(3)$$<br>&#x516C;&#x5F0F;$(3)$&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x5206;&#x88C2;&#x8282;&#x70B9;&#x7684;&#x6253;&#x5206;&#xFF0C;&#x5F62;&#x5F0F;&#x4E0A;&#x5F88;&#x50CF;CART&#x6811;&#x7EAF;&#x5EA6;&#x6253;&#x5206;&#x7684;&#x8BA1;&#x7B97;&#xFF0C;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x5B83;&#x662F;&#x4ECE;&#x76EE;&#x6807;&#x51FD;&#x6570;&#x4E2D;&#x63A8;&#x5BFC;&#x800C;&#x5F97;&#x3002;&#x56FE;&#x4E2D;&#x663E;&#x793A;&#x76EE;&#x6807;&#x51FD;&#x6570;&#x503C;&#x7684;&#x8BA1;&#x7B97;&#xFF1A;<br><img src="/2016/10/05/a-guide-to-xgboost-A-Scalable-Tree-Boosting-System/./1475564124004.png" alt="obj&#x503C;&#x8BA1;&#x7B97;"><br>&#x5B9E;&#x8DF5;&#x4E2D;&#xFF0C;&#x5F88;&#x96BE;&#x53BB;&#x7A77;&#x4E3E;&#x6BCF;&#x4E00;&#x9897;&#x6811;&#x8FDB;&#x884C;&#x6253;&#x5206;&#xFF0C;&#x518D;&#x9009;&#x51FA;&#x6700;&#x597D;&#x7684;&#x3002;&#x901A;&#x5E38;&#x91C7;&#x7528;&#x8D2A;&#x5FC3;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x9010;&#x5C42;&#x9009;&#x62E9;&#x6700;&#x4F73;&#x7684;&#x5206;&#x88C2;&#x8282;&#x70B9;&#x3002;&#x5047;&#x8BBE;$I_L$&#x548C;$I_R$&#x4E3A;&#x5206;&#x88C2;&#x8282;&#x70B9;&#x7684;&#x5DE6;&#x53F3;&#x8282;&#x70B9;&#xFF0C;&#x8BB0;$I=I_L \cup I_R$&#x3002;<br>&#x5219;&#x9009;&#x62E9;&#x6B64;&#x8282;&#x70B9;&#x5206;&#x88C2;&#x7684;&#x6536;&#x76CA;&#x4E3A;&#xFF1A;<br>$${L_{split}} = {1 \over 2}\left[ {{{{{\left( {\sum\limits_{i \in {I_L}} {{g_i}} } \right)}^2}} \over {\sum\limits_{i \in {I_L}} {{h_i} + \lambda } }} + {{{{\left( {\sum\limits_{i \in {I_J}} {{g_i}} } \right)}^2}} \over {\sum\limits_{i \in {I_J}} {{h_i} + \lambda } }} - {{{{\left( {\sum\limits_{i \in I} {{g_i}} } \right)}^2}} \over {\sum\limits_{i \in I} {{h_i} + \lambda } }}} \right] - \gamma  \;\;-- (4)$$<br>[&#x8865;&#x5145;]<br>1.&#x4F5C;&#x4E3A;GB&#x7C7B;&#x65B9;&#x6CD5;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x91C7;&#x7528;shrinkage&#x7B56;&#x7565;<br>2.&#x968F;&#x673A;&#x68EE;&#x6797;[5]&#x7684;&#x7279;&#x5F81;&#x964D;&#x91C7;&#x6837;(subsampling)&#x514B;&#x670D;&#x8FC7;&#x62DF;&#x5408;<a href="https://www.salford-systems.com/products/treenet" target="_blank" rel="external">&#x4EE3;&#x7801;</a>&#xFF0C;xgboost&#x7528;&#x4E86;&#x7C7B;&#x4F3C;&#x7684;&#x6280;&#x672F;&#x3002;&#x548C;&#x4F20;&#x7EDF;&#x7684;&#x964D;&#x91C7;&#x6837;&#x4E0D;&#x540C;&#xFF0C;xgboost&#x6309;&#x5217;&#x8FDB;&#x884C;&#x964D;&#x91C7;&#x6837;&#xFF0C;&#x5728;&#x5E76;&#x884C;&#x5316;&#x6709;&#x52A0;&#x901F;&#x4F5C;&#x7528;&#x3002;(&#x5F85;&#x7814;&#x7A76;)</p>
<h4 id="&#x67E5;&#x627E;&#x5206;&#x88C2;&#x8282;&#x70B9;-split-finding"><a href="#&#x67E5;&#x627E;&#x5206;&#x88C2;&#x8282;&#x70B9;-split-finding" class="headerlink" title="&#x67E5;&#x627E;&#x5206;&#x88C2;&#x8282;&#x70B9;(split finding)"></a>&#x67E5;&#x627E;&#x5206;&#x88C2;&#x8282;&#x70B9;(split finding)</h4><p><strong>&#x8D2A;&#x5FC3;&#x7B97;&#x6CD5;</strong><br>&#x8D2A;&#x5FC3;&#x7B97;&#x6CD5;&#x662F;&#x6700;&#x57FA;&#x672C;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x524D;&#x9762;&#x4ECB;&#x7ECD;&#x7684;&#x65F6;&#x5019;&#x6709;&#x63D0;&#x8FC7;&#x3002;&#x5177;&#x4F53;&#x505A;&#x6CD5;&#xFF1A;&#x904D;&#x5386;&#x6240;&#x6709;&#x7279;&#x5F81;&#x4E2D;&#x53EF;&#x80FD;&#x7684;&#x5206;&#x88C2;&#x70B9;&#x4F4D;&#x7F6E;&#xFF0C;&#x6839;&#x636E;&#x516C;&#x5F0F;$(4)$&#x627E;&#x5230;&#x6700;&#x5408;&#x9002;&#x7684;&#x4F4D;&#x7F6E;&#x3002;$Split\_Finding()$&#x7B97;&#x6CD5;&#x6D41;&#x7A0B;&#x5982;&#x4E0B;<br>$$\eqalign{
  &amp; Split\_Finding(): \cr
  &amp; Input:I,instance\;set\;of\;current\;node  \cr 
  &amp; Input:d,feature\;dimension  \cr 
  &amp; gain \leftarrow 0  \cr 
  &amp; G \leftarrow \sum\limits_{i \in I} {{g_i}} ,H \leftarrow \sum\limits_{i \in I} {{h_i}}   \cr 
  &amp; for\;k = 1\;to\;m\;do  \cr 
  &amp; \;\;\;\;{G_L} \leftarrow 0,{H_L} \leftarrow 0  \cr 
  &amp; \;\;\;\;for\;j\;in\;sorted\left( {I,by\;{{\bf{x}}_{jk}}} \right)\;do  \cr 
  &amp; \;\;\;\;\;\;\;\;{G_L} \leftarrow {G_L} + {g_j},{H_L} \leftarrow {H_L} + {h_j}  \cr 
  &amp; \;\;\;\;\;\;\;\;{G_R} \leftarrow G - {G_L},{H_R} \leftarrow H - {H_L}  \cr 
  &amp; \;\;\;\;\;\;\;\;score \leftarrow \max \left( {score,{{G_L^2} \over {{H_L} + \lambda }} + {{G_R^2} \over {{H_R} + \lambda }} - {{{G^2}} \over {H + \lambda }}} \right)  \cr 
  &amp; \;\;\;\;end  \cr 
  &amp; end \cr
  &amp; Output:\; split\_value\; with\; max \; score} $$<br> <strong>&#x8FD1;&#x4F3C;&#x7B97;&#x6CD5;</strong><br> &#x5982;&#x679C;&#x6570;&#x636E;&#x4E0D;&#x80FD;&#x4E00;&#x6B21;&#x8BFB;&#x5165;&#x5185;&#x5B58;&#xFF0C;&#x4F7F;&#x7528;&#x8D2A;&#x5FC3;&#x7B97;&#x6CD5;&#x6548;&#x7387;&#x8F83;&#x4F4E;&#x3002;&#x8FD1;&#x4F3C;&#x7B97;&#x6CD5;&#x5728;&#x8FC7;&#x53BB;&#x4E5F;&#x6709;&#x5E94;&#x7528;[6, 7, 8]&#x3002;&#x5177;&#x4F53;&#x63CF;&#x8FF0;&#x4E3A;&#xFF0C;&#x5BF9;&#x4E8E;&#x67D0;&#x4E2A;&#x7279;&#x5F81;${\bf x}_k$&#xFF0C;&#x627E;&#x5230;&#x8BE5;&#x7279;&#x5F81;&#x82E5;&#x5E72;&#x503C;&#x57DF;&#x5206;&#x754C;&#x70B9;$\{s_{k1}, s_{k2}, ... ,s_{kl}\}$&#x3002;&#x6839;&#x636E;&#x7279;&#x5F81;&#x7684;&#x503C;&#x5BF9;&#x6837;&#x672C;&#x8FDB;&#x884C;&#x5206;&#x6876;&#xFF0C;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;&#x6876;&#x5185;&#x7684;&#x6837;&#x672C;&#x7EDF;&#x8BA1;&#x503C;$G$&#x3001;$H$&#x8FDB;&#x884C;&#x7D2F;&#x52A0;&#xFF08;&#x4E24;&#x4E2A;&#x7EDF;&#x8BA1;&#x91CF;&#x542B;&#x4E49;&#x540C;&#x8D2A;&#x5FC3;&#x7B97;&#x6CD5;&#xFF09;&#xFF0C;&#x8BB0;&#x4E3A;&#x5206;&#x754C;&#x70B9;$v$&#x7684;&#x7EDF;&#x8BA1;&#x91CF;&#xFF0C;$v$&#x6EE1;&#x8DB3;$\{{\bf x}_{kj}=s_{kv}\}$&#x3002;&#x6700;&#x540E;&#x5728;&#x5206;&#x754C;&#x70B9;&#x96C6;&#x5408;&#x4E0A;&#x8C03;&#x7528;$Split\_Finding()$&#x8FDB;&#x884C;&#x8D2A;&#x5FC3;&#x67E5;&#x627E;&#xFF0C;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x4E3A;&#x6700;&#x4F73;&#x5206;&#x88C2;&#x70B9;&#x7684;&#x8FD1;&#x4F3C;&#x3002;&#x5177;&#x4F53;&#x5982;&#x4E0B;&#xFF1A;<br> $$\eqalign{
  &amp; for\;k = 1\;to\;m\;do  \cr 
  &amp; \;\;\;\;Propose\;{S_k} = \left\{ {{s_{k1}},{s_{k2}},...,{s_{kl}}} \right\}\;by\;percentile\;on\;feature\;k  \cr 
  &amp; \;\;\;\;Propose\;can\;be\;done\;per\;tree\left( {global} \right),or\;per\;split\left( {local} \right)  \cr 
  &amp; end  \cr 
  &amp; for\;k = 1\;to\;m\;do  \cr 
  &amp; \;\;\;\;{G_{kv}} \leftarrow  = \sum\limits_{j \in \left\{ {j|{s_{k,v}} \ge {x_{jk}} &gt; {s_{k,v - 1}}} \right\}} {{g_j}}   \cr 
  &amp; \;\;\;\;{H_{kv}} \leftarrow  = \sum\limits_{j \in \left\{ {j|{s_{k,v}} \ge {x_{jk}} &gt; {s_{k,v - 1}}} \right\}} {{h_j}}   \cr 
  &amp; end  \cr 
  &amp; call\;Split\_Finding\left( {} \right) \cr} $$<br> &#x4E0B;&#x9762;&#x4ECB;&#x7ECD;&#x627E;&#x7279;&#x5F81;&#x503C;&#x57DF;&#x5206;&#x754C;&#x70B9;$\{s_{k1}, s_{k2}, ... ,s_{kl}\}$&#x7684;&#x65B9;&#x6CD5;&#xFF0C;<em>&#x52A0;&#x6743;&#x5206;&#x4F4D;&#x6570;&#x7565;&#x56FE;</em>&#x3002;&#x4E3A;&#x4E86;&#x5C3D;&#x53EF;&#x80FD;&#x5730;&#x903C;&#x8FD1;&#x6700;&#x4F73;&#x5206;&#x88C2;&#x70B9;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4FDD;&#x8BC1;&#x91C7;&#x6837;&#x540E;&#x6570;&#x636E;&#x5206;&#x5E03;&#x540C;&#x539F;&#x59CB;&#x6570;&#x636E;&#x5C3D;&#x53EF;&#x80FD;&#x4E00;&#x81F4;&#x3002;&#x8BB0;${D_k} = \left\{ {\left( {{x_{1k}},{h_1}} \right),\left( {{x_{2k}},{h_2}} \right) \cdots \left( {{x_{nk}},{h_n}} \right)} \right\}$&#x8868;&#x793A; &#x6BCF;&#x4E2A;&#x8BAD;&#x7EC3;&#x6837;&#x672C;&#x7684;&#x7B2C;$k$&#x7EF4;&#x7279;&#x5F81;&#x503C;&#x548C;&#x5BF9;&#x5E94;&#x4E8C;&#x9636;&#x5BFC;&#x6570;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x5B9A;&#x4E49;&#x6392;&#x5E8F;&#x51FD;&#x6570;&#x4E3A;$r_k(\cdot):R \rightarrow[0, +\infty)$<br> $${r_k}\left( z \right) = {1 \over {\sum\limits_{\left( {x,h} \right) \in {D_k}} h }}\sum\limits_{\left( {x,h} \right) \in {D_k},x &lt; z} h $$<br> &#x51FD;&#x6570;&#x8868;&#x793A;&#x7279;&#x5F81;&#x7684;&#x503C;&#x5C0F;&#x4E8E;$z$&#x7684;&#x6837;&#x672C;&#x5206;&#x5E03;&#x5360;&#x6BD4;&#xFF0C;&#x5176;&#x4E2D;&#x4E8C;&#x9636;&#x5BFC;&#x6570;$h$&#x53EF;&#x4EE5;&#x89C6;&#x4E3A;&#x6743;&#x91CD;&#xFF0C;&#x540E;&#x9762;&#x8BBA;&#x8FF0;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x6392;&#x5E8F;&#x51FD;&#x6570;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x627E;&#x5230;&#x4E00;&#x7EC4;&#x70B9;$\{s_{k1}, s_{k2}, ... ,s_{kl}\}$ ,&#x6EE1;&#x8DB3;&#xFF1A;<br>$$\left| {{r_k}\left( {{s_{k,j}}} \right) - {r_k}\left( {{s_{k,j + 1}}} \right)} \right| &lt; \varepsilon$$<br>&#x5176;&#x4E2D;&#xFF0C;${s_{k1}} = \mathop {\min }\limits_i {x_{ik}},{s_{kl}} = \mathop {\max }\limits_i {x_{ik}}$&#x3002;$\varepsilon$&#x4E3A;&#x91C7;&#x6837;&#x7387;&#xFF0C;&#x76F4;&#x89C2;&#x4E0A;&#x7406;&#x89E3;&#xFF0C;&#x6211;&#x4EEC;&#x6700;&#x540E;&#x4F1A;&#x5F97;&#x5230;$1/\varepsilon$&#x4E2A;&#x5206;&#x754C;&#x70B9;&#x3002;<br>&#x8BA8;&#x8BBA;&#x4E0B;&#x4E3A;&#x4F55;$h_i$&#x8868;&#x793A;&#x6743;&#x91CD;&#x3002;&#x4ECE;&#x76EE;&#x6807;&#x51FD;&#x6570;$(1)$&#x51FA;&#x53D1;&#xFF0C;&#x914D;&#x65B9;&#x5F97;&#x5230;$$\sum\limits_{i = 1}^n {\left[ {{1 \over 2}{{\left( {{f_t}\left( {{x_i}} \right) - {g_i}/{h_i}} \right)}^2}} \right]}  + \Omega \left( {{f_t}} \right) + constant$$<br>&#x5177;&#x4F53;&#x8BC1;&#x660E;&#x8FC7;&#x7A0B;&#x89C1;&#x539F;&#x4F5C;&#x9644;&#x5F55;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5173;&#x4E8E;&#x6807;&#x7B7E;&#x4E3A;${{g_i}/{h_i}}$&#x548C;&#x6743;&#x91CD;&#x4E3A;$h_i$&#x7684;&#x5E73;&#x65B9;&#x8BEF;&#x5DEE;&#x5F62;&#x5F0F;&#x3002;&#x5F53;&#x6BCF;&#x4E2A;&#x6743;&#x91CD;&#x76F8;&#x540C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9000;&#x5316;&#x4E3A;&#x666E;&#x901A;&#x7684;&#x5206;&#x4F4D;&#x6570;&#x7565;&#x56FE;[9, 10]<br>&#x63A5;&#x4E0B;&#x6765;&#x4ECB;&#x7ECD;&#x53E6;&#x4E00;&#x4E2A;&#x8BBA;&#x6587;&#x7684;&#x4EAE;&#x70B9;&#xFF0C;&#x5BFB;&#x627E;&#x5206;&#x88C2;&#x70B9;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5982;&#x4F55;&#x514B;&#x670D;&#x6570;&#x636E;&#x7A00;&#x758F;&#x3002;&#x7A00;&#x758F;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x6765;&#x81EA;&#x4E8E;<em>missing value</em>&#x3001;&#x5927;&#x91CF;&#x7684;0&#x503C;&#x3001;&#x6216;&#x8005;&#x7279;&#x5F81;&#x5DE5;&#x7A0B;&#x4F8B;&#x5982;&#x91C7;&#x7528;one-hot&#x8868;&#x793A;&#x5E26;&#x6765;&#x7684;&#x3002;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x8BBE;&#x5B9A;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x6307;&#x5411;&#xFF0C;&#x5F53;&#x53D1;&#x751F;&#x7279;&#x5F81;&#x7F3A;&#x5931;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C06;&#x6837;&#x672C;&#x5206;&#x7C7B;&#x5230;&#x9ED8;&#x8BA4;&#x5206;&#x652F;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;<br><img src="/2016/10/05/a-guide-to-xgboost-A-Scalable-Tree-Boosting-System/./1475660945404.png" alt="&#x5206;&#x7C7B;&#x9ED8;&#x8BA4;&#x65B9;&#x5411;&#x793A;&#x610F;&#x56FE;"><br>&#x9ED8;&#x8BA4;&#x65B9;&#x5411;&#x7531;&#x8BAD;&#x7EC3;&#x96C6;&#x4E2D;non-missing value&#x5B66;&#x4E60;&#x800C;&#x5F97;&#xFF0C;&#x628A;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x503C;&#x4E5F;&#x5F53;&#x6210;missing value&#x8FDB;&#x884C;&#x5B66;&#x4E60;&#x548C;&#x5904;&#x7406;&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;<br>$$\eqalign{
  &amp; Sparsity\_Split\_Finding(): \cr
  &amp; Input:I,instance\;set\;of\;current\;node  \cr 
  &amp; Input:d,feature\;dimension  \cr 
  &amp; gain \leftarrow 0  \cr 
  &amp; G \leftarrow \sum\limits_{i \in I} {{g_i}} ,H \leftarrow \sum\limits_{i \in I} {{h_i}}   \cr 
  &amp; for\;k = 1\;to\;m\;do  \cr 
  &amp; \;\;\;\;{G_L} \leftarrow 0,{H_L} \leftarrow 0  \cr 
  &amp; \;\;\;\;for\;j\;in\;sorted\left( {I_k,ascent order by\;{{\bf{x}}_{jk}}} \right)\;do  \cr 
  &amp; \;\;\;\;\;\;\;\;{G_L} \leftarrow {G_L} + {g_j},{H_L} \leftarrow {H_L} + {h_j}  \cr 
  &amp; \;\;\;\;\;\;\;\;{G_R} \leftarrow G - {G_L},{H_R} \leftarrow H - {H_L}  \cr 
  &amp; \;\;\;\;\;\;\;\;score \leftarrow \max \left( {score,{{G_L^2} \over {{H_L} + \lambda }} + {{G_R^2} \over {{H_R} + \lambda }} - {{{G^2}} \over {H + \lambda }}} \right)  \cr 
  &amp; \;\;\;\;end  \cr 
   &amp; \;\;\;\;{G_R} \leftarrow 0,{H_R} \leftarrow 0  \cr 
  &amp; \;\;\;\;for\;j\;in\;sorted\left( {I_k,ascent order by\;{{\bf{x}}_{jk}}} \right)\;do  \cr 
  &amp; \;\;\;\;\;\;\;\;{G_R} \leftarrow {G_R} + {g_j},{H_R} \leftarrow {H_R} + {h_j}  \cr 
  &amp; \;\;\;\;\;\;\;\;{G_L} \leftarrow G - {G_R},{H_L} \leftarrow H - {H_R}  \cr 
  &amp; \;\;\;\;\;\;\;\;score \leftarrow \max \left( {score,{{G_L^2} \over {{H_L} + \lambda }} + {{G_R^2} \over {{H_R} + \lambda }} - {{{G^2}} \over {H + \lambda }}} \right)  \cr 
  &amp; \;\;\;\;end  \cr 
  &amp; end \cr
  &amp; Output:\; split\_value\; and\; default \;directions\; with\; max \; score} $$</p>
<p>&#x8BBA;&#x6587;&#x540E;&#x7EED;&#x5185;&#x5BB9;&#x4E3A;<strong>&#x7CFB;&#x7EDF;&#x90E8;&#x5206;</strong>&#xFF08;&#x5305;&#x62EC;&#x5E76;&#x884C;&#x5316;&#x3001;cache-aware&#x52A0;&#x901F;&#x3001;&#x6570;&#x636E;&#x5757;&#x9884;&#x5904;&#x7406;&#xFF0C;&#x9700;&#x8981;&#x7ED3;&#x5408;&#x4EE3;&#x7801;&#x7814;&#x8BFB;&#xFF09;&#x3001;<strong>&#x5B9E;&#x9A8C;</strong>&#xFF08;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x96C6;&#x4E0A;&#x8FDB;&#x884C;&#x4E86;&#x5B9E;&#x9A8C;&#xFF0C;&#x5305;&#x62EC;&#x5206;&#x7C7B;&#x3001;LTR&#x3001;CTR&#x9884;&#x4F30;&#xFF09;&#x8BE6;&#x89C1;&#x8BBA;&#x6587;[11]<br>&#x4EE3;&#x7801;&#x9605;&#x8BFB;&#xFF1A;<br>&#x4EE3;&#x7801;&#x6613;&#x7528;&#xFF0C;&#x6CE8;&#x91CA;&#x8F83;&#x5B8C;&#x5907;&#xFF0C;&#x652F;&#x6301;&#x591A;&#x79CD;&#x8BED;&#x8A00;&#xFF0C;&#x76EE;&#x524D;&#x4ECD;&#x5728;&#x6301;&#x7EED;&#x96C6;&#x6210;&#x548C;&#x66F4;&#x65B0;&#xFF0C;&#x5176;&#x4E2D;&#x7A00;&#x758F;&#x77E9;&#x9635;&#x5B58;&#x50A8;&#x4E3A;CSR&#x683C;&#x5F0F;(&#x89C1;&#x9644;&#x5F55;&#x601D;&#x8003;[2])&#x3002;<br>&#x5F88;&#x591A;&#x6838;&#x5FC3;&#x7684;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x51FD;&#x6570;&#x590D;&#x7528;&#x4E86;&#x4F5C;&#x8005;&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x5E93;DMLC(Distributed Machine Learning Common Codebase)&#xFF0C;&#x548C;&#x53C2;&#x8003;[12]&#x4E2D;&#x4ECB;&#x7ECD;&#x4EE3;&#x7801;&#x7248;&#x672C;&#x5BF9;&#x6BD4;&#xFF0C;&#x8FD0;&#x7528;&#x8F83;&#x591A;&#x901A;&#x7528;&#x7684;&#x5DE5;&#x5382;&#x7C7B;&#x65B9;&#x6CD5;(&#x89C1;&#x9644;&#x5F55;&#x601D;&#x8003;[3])&#xFF0C;&#x8349;&#x8349;&#x4ECB;&#x7ECD;&#x4E0B;&#x4E3B;&#x4F53;&#x4EE3;&#x7801;&#x7EC4;&#x6210;&#xFF0C;&#x4E0B;&#x4E00;&#x7BC7;&#x4F1A;&#x8FDB;&#x884C;&#x8BE6;&#x7EC6;&#x62C6;&#x89E3;&#xFF1A;<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">Data.h &#x5B9A;&#x4E49;&#x57FA;&#x7840;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;</div><div class="line">    &#x5982;&#x6570;&#x636E;&#x4FE1;&#x606F;MetaInfo&#xFF0C;&#x7A00;&#x758F;&#x77E9;&#x9635;RowBatch&#xFF0C;&#x6570;&#x636E;&#x96C6;&#x5408;RowSet&#xFF0C;&#x8BAD;&#x7EC3;&#x65F6;&#x77E9;&#x9635;&#x8868;&#x8FBE;DMatrix&#x3002;</div><div class="line">Tree_model.h &#x5B9A;&#x4E49;&#x4E86;&#x6811;&#x76F8;&#x5173;&#x53C2;&#x6570;TreeParam&#xFF0C;&#x6811;&#x7684;&#x6A21;&#x677F;&#x7C7B;TreeModel(&#x5BF9;&#x5E94;&#x6811;&#x8282;&#x70B9;Node)&#xFF0C;</div><div class="line">    &#x56DE;&#x5F52;&#x6811;RegTree&#xFF0C;&#x5173;&#x4E8E;&#x6811;&#x7684;&#x64CD;&#x4F5C;&#xFF08;&#x589E;&#x5220;&#x6539;&#x67E5;&#xFF0C;&#x8BFB;&#x5199;load,save,dump2text&#x7B49;&#xFF09;&#x3002;</div><div class="line">Tree_updater.h &#x5B8C;&#x6210;&#x5BF9;&#x6811;&#x7684;&#x66F4;&#x65B0;&#xFF0C;&#x5305;&#x542B;&#x5BF9;&#x8C61;&#x5DE5;&#x5382;&#x7C7B;&#x7528;&#x4E8E;&#x6CE8;&#x518C;&#x4E0D;&#x540C;&#x7684;&#x66F4;&#x65B0;&#x64CD;&#x4F5C;:</div><div class="line"><span class="string">&quot;updater_colmaker.cc&quot;</span>,  &#x901A;&#x8FC7;&#x6570;&#x636E;&#x5217;(&#x8BBA;&#x6587;&#x4ECB;&#x7ECD;&#x65B9;&#x5F0F;)&#x6811;&#x7684;&#x66F4;&#x65B0;&#xFF08;&#x5355;&#x673A;&#x591A;&#x7EBF;&#x7A0B;&#x7248;&#x672C;&#xFF09;</div><div class="line"><span class="string">&quot;updater_skmaker.cc&quot;</span>,  &#x5206;&#x4F4D;&#x6570;&#x7565;&#x56FE;&#x6CD5;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x91C7;&#x6837;</div><div class="line"><span class="string">&quot;updater_refresh.cc&quot;</span>,  &#x66F4;&#x65B0;&#x64CD;&#x4F5C;</div><div class="line"><span class="string">&quot;updater_prune.cc&quot;</span>,  &#x66F4;&#x65B0;&#x8FC7;&#x7A0B;&#x4E2D;&#x8FDB;&#x884C;&#x526A;&#x679D;</div><div class="line"><span class="string">&quot;updater_histmaker.cc&quot;</span>,  &#x901A;&#x8FC7;&#x76F4;&#x65B9;&#x56FE;&#x76F8;&#x5173;&#x7EDF;&#x8BA1;&#x91CF;&#x5B8C;&#x6210;&#x6811;&#x7684;&#x66F4;&#x65B0;</div><div class="line"><span class="string">&quot;updater_sync.cc&quot;</span>, &#x4ECE;&#x5206;&#x5E03;&#x8BAD;&#x7EC3;&#x673A;&#x5668;&#x8282;&#x70B9;&#x4E2D;&#x8FDB;&#x884C;&#x6811;&#x7684;&#x540C;&#x6B65;</div><div class="line">Objective.h &#x5B9A;&#x4E49;&#x4E86;&#x76EE;&#x6807;&#x51FD;&#x6570;&#xFF0C;&#x5177;&#x4F53;&#x4F18;&#x5316;&#x76EE;&#x6807;&#x5B9E;&#x73B0;&#xFF0C;&#x56DE;&#x5F52;,&#x5206;&#x7C7B;,&#x6392;&#x5E8F;&#x51FD;&#x6570;&#x7531;&#x5BF9;&#x8C61;&#x5DE5;&#x5382;&#x751F;&#x6210;&#xFF1A;</div><div class="line"><span class="string">&quot;multiclass_obj.cc&quot;</span>, &#x591A;&#x5206;&#x7C7B;&#x635F;&#x5931;&#x51FD;&#x6570;(<span class="string">&quot;SoftmaxMultiClass&quot;</span>,<span class="string">&quot;SoftprobMultiClass&quot;</span>)</div><div class="line"><span class="string">&quot;rank_obj.cc&quot;</span>, &#x6392;&#x5E8F;&#x635F;&#x5931;&#x51FD;&#x6570;&#xFF0C;&#x6709;&#x591A;&#x79CD;&#x53EF;&#x9009;(PairwiseRankObj&#xFF0C;LambdaRankNDCG&#xFF0C;LambdaRankObjMAP)</div><div class="line"><span class="string">&quot;regression_obj.cc&quot;</span>&#xFF0C;&#x56DE;&#x5F52;&#x635F;&#x5931;&#x51FD;&#x6570;(<span class="string">&quot;GammaRegression&quot;</span>)</div><div class="line">&#x770B;demo&#x53EF;&#x77E5;&#xFF0C;xgboost&#x5141;&#x8BB8;&#x7528;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x635F;&#x5931;&#x51FD;&#x6570;&#x3002;</div><div class="line">metric.h &#x6A21;&#x578B;&#x6548;&#x679C;&#x8BC4;&#x4F30;&#x7C7B;&#xFF0C;&#x5305;&#x542B;elementwise_metric&#x3001;multiclass_metric&#x3001;rank_metric&#x4E09;&#x7C7B;&#x3002;</div><div class="line"><span class="string">&quot;elementwise_metric.cc&quot;</span>: &#x5B9A;&#x4E49;&#x8BC4;&#x4F30;&#x51FD;&#x6570;&#x6709;(RMSE, MAE, logLoss, Error, PosssionNegLoglik, </div><div class="line">    GammaDeviance, GammaNlogLik)</div><div class="line"><span class="string">&quot;multiclass_metric.cc&quot;</span>: &#x5B9A;&#x4E49;&#x4E24;&#x79CD;&#x8BC4;&#x4F30;&#x6307;&#x6807;(SoftmaxMultiClass, SoftprobMultiClass)</div><div class="line"><span class="string">&quot;rank_metric.cc&quot;</span>: &#x5B9A;&#x4E49;&#x8BC4;&#x4F30;&#x6307;&#x6807;(AMS, Auc, Precision, NDCG, MAP)</div></pre></td></tr></table></figure></p>
<h3 id="&#x9644;&#x5F55;"><a href="#&#x9644;&#x5F55;" class="headerlink" title="&#x9644;&#x5F55;"></a>&#x9644;&#x5F55;</h3><p><strong>&#x5F15;&#x6587;</strong><br>[1] Panda, Biswanath, et al. &#x201C;PLANET: massively parallel learning of tree ensembles with MapReduce.&#x201D; Proceedings of the Vldb Endowment 2.2(2009):1426-1437.<br>[2] Tyree, Stephen, et al. &#x201C;Parallel boosted regression trees for web search ranking.&#x201D; International Conference on World Wide Web ACM, 2011:387-396.<br>[3] Ye, Jerry, et al. &#x201C;Stochastic gradient boosted distributed decision trees.&#x201D; ACM Conference on Information and Knowledge Management, CIKM 2009, Hong Kong, China, November 2009:2061-2064.<br>[4] Johnson, Rie, and Z. Tong. &#x201C;Learning Nonlinear Functions Using Regularized Greedy Forest.&#x201D; IEEE Transactions on Pattern Analysis &amp; Machine Intelligence 36.5(2013):942-54.<br>[5] Friedman, Jerome H., and B. E. Popescu. &#x201C;Importance Sampled Learning Ensembles.&#x201D; (2003).<br>[6] Li, Ping, C. J. C. Burges, and Q. Wu. &#x201C;McRank: Learning to Rank Using Multiple Classification and Gradient Boosting.&#x201D; Advances in Neural Information Processing Systems (2007):897-904.<br>[7] Bekkerman, Ron, M. Bilenko, and J. Langford. &#x201C;Scaling up machine learning: parallel and distributed approaches.&#x201D; ACM SIGKDD International Conference Tutorials ACM, 2011:1-1.<br>[8] Tyree, Stephen, et al. &#x201C;Parallel boosted regression trees for web search ranking.&#x201D; International Conference on World Wide Web ACM, 2011:387-396.<br>[9] Greenwald, Michael. &#x201C;Space-efficient online computation of quantile summaries.&#x201D; Acm Sigmod Record 30.2(2001):58&#x2013;66.<br>[10] Zhang, Qi, and W. Wang. &#x201C;A Fast Algorithm for Approximate Quantiles in High Speed Data Streams.&#x201D; (2007):29-29.<br>[11]Chen, Tianqi, and C. Guestrin. &#x201C;XGBoost: A Scalable Tree Boosting System.&#x201D; (2016).<br>[12] xgboost&#x5BFC;&#x8BFB;&#x548C;&#x5B9E;&#x6218;&#xFF08;<a href="http://pan.baidu.com/s/1qXWkVbY" target="_blank" rel="external">&#x767E;&#x5EA6;&#x4E91;&#x5730;&#x5740;</a>&#xFF09;&#xFF0C;&#x738B;&#x8D85;&#xFF0C;&#x9648;&#x5E05;&#x534E;<br>[13] <a href="http://blog.csdn.net/zc02051126/article/details/46711047" target="_blank" rel="external">xgboost&#x4EE3;&#x7801;&#x53C2;&#x6570;&#x8BF4;&#x660E;</a>, @zc02051126&#x8BD1;<br>[14]<a href="http://cos.name/2015/03/xgboost/" target="_blank" rel="external">xgboost: &#x901F;&#x5EA6;&#x5FEB;&#x6548;&#x679C;&#x597D;&#x7684;boosting&#x6A21;&#x578B;</a>,&#x4F55;&#x901A;<br>[15]<a href="http://xgboost.readthedocs.io/en/latest//model.html#" target="_blank" rel="external">Introduction to Boosted Trees</a>, &#x5B98;&#x7F51;</p>
<p><strong>&#x601D;&#x8003;</strong><br>[1].&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x770B;&#x660E;&#x767D;&#xFF0C;&#x624B;&#x75D2;&#x63A8;&#x5BFC;&#x4E00;&#x628A;&#x5C31;&#x901A;&#x987A;&#x591A;&#x4E86;&#x3002;&#x51FD;&#x6570;$f(x)$&#x5728;$x_0$&#x5904;&#x7684;&#x4E8C;&#x9636;&#x5C55;&#x5F00;&#x5F0F;&#x4E3A;&#xFF1A;$$f\left( x \right) = f\left( {{x_0}} \right) + f&apos;\left( {{x_0}} \right)\left( {x - {x_0}} \right) + f&apos;&apos;\left( {{x_0}} \right){\left( {x - {x_0}} \right)^2}$$<br>&#x6211;&#x4EEC;&#x5BF9;$l(y_i, x)$&#x5728;${\hat y}^{(t-1)}_i$&#x5904;&#x8FDB;&#x884C;&#x4E8C;&#x9636;&#x5C55;&#x5F00;&#x5F97;&#x5230;<br>$$l({y_i},x) = l\left( {{y_i},{{\hat y}^{\left( {t - 1} \right)}}} \right) + {{\partial l\left( {{y_i},{{\hat y}^{\left( {t - 1} \right)}}} \right)} \over {\partial {{\hat y}^{\left( {t - 1} \right)}}}}\left( {x - {{\hat y}^{\left( {t - 1} \right)}}} \right) + {{{\partial ^2}l\left( {{y_i},{{\hat y}^{\left( {t - 1} \right)}}} \right)} \over {\partial {{\hat y}^{\left( {t - 1} \right)}}}}{\left( {x - {{\hat y}^{\left( {t - 1} \right)}}} \right)^2}$$<br>&#x4EE4;$x={\hat y}^{(t-1)}+f_t({\bf x}_i)$&#xFF0C;&#x4E14;&#x8BB0;&#x4E00;&#x9636;&#x5BFC;&#x4E3A;${g_i} = {{\partial l\left( {{y_i},{{\hat y}^{\left( {t - 1} \right)}}} \right)} \over {\partial {{\hat y}^{\left( {t - 1} \right)}}}}$&#xFF0C;&#x4E8C;&#x9636;&#x5BFC;&#x4E3A;${h_i} = {{{\partial ^2}l\left( {{y_i},{{\hat y}^{\left( {t - 1} \right)}}} \right)} \over {\partial {{\hat y}^{\left( {t - 1} \right)}}}}$&#x3002;<br>&#x6211;&#x4EEC;&#x5F97;&#x5230;$l(y_i, {\hat y}^{(t-1)}+f_t({\bf x}_i))$&#x7684;&#x4E8C;&#x9636;&#x6CF0;&#x52D2;&#x5C55;&#x5F00;&#xFF1A;<br>$$l\left( {{y_i},{{\hat y}^{\left( {t - 1} \right)}}} \right) + {g_i}{f_t}\left( {{{\bf{x}}_i}} \right) + {1 \over 2}{h_i}f_t^2\left( {{{\bf{x}}_i}} \right)$$<br>&#x5E26;&#x5165;&#x76EE;&#x6807;&#x51FD;&#x6570;&#x53EF;&#x5F97;&#xFF1A;<br>$${L^{\left( t \right)}} \simeq \sum\limits_{i = 1}^n {\left[ {l\left( {{y_i},{{\hat y}^{\left( {t - 1} \right)}}} \right) + {g_i}{f_t}\left( {{{\bf{x}}_i}} \right) + {1 \over 2}{h_i}f_t^2\left( {{{\bf{x}}_i}} \right)} \right]}  + \Omega \left( {{f_t}} \right)$$</p>
<p>[2]&#xFF1A;csr&#x683C;&#x5F0F;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x7C7B;&#x4F3C;&#x7684;&#x683C;&#x5F0F;&#x6709;&#x4EC0;&#x4E48;&#xFF0C;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;<br>&#x53C2;&#x89C1;&#xFF1A;<a href="http://www.cnblogs.com/xbinworld/p/4273506.html?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">&#x7A00;&#x758F;&#x77E9;&#x9635;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x603B;&#x7ED3;+&#x5B58;&#x50A8;&#x6548;&#x7387;&#x5BF9;&#x6BD4;:COO,CSR,DIA,ELL,HYB</a><br><img src="/2016/10/05/a-guide-to-xgboost-A-Scalable-Tree-Boosting-System/./1475736817607.png" alt="CSR"><br>CSR&#x6709;&#x884C;&#x504F;&#x79FB;&#xFF0C;&#x5217;&#x4E0B;&#x6807;&#xFF0C;&#x503C;&#x4E09;&#x79CD;&#x5143;&#x7D20;&#x3002;&#x884C;&#x504F;&#x79FB;&#x6570;&#x7EC4;&#x5927;&#x5C0F;&#x4E3A;&#xFF08;&#x603B;&#x884C;&#x6570;&#x76EE;+1&#xFF09;&#xFF0C;&#x884C;&#x504F;&#x79FB;&#x8868;&#x793A;&#x67D0;&#x4E00;&#x884C;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x5728;values&#x91CC;&#x9762;&#x7684;&#x8D77;&#x59CB;&#x504F;&#x79FB;&#x4F4D;&#x7F6E;&#x3002;&#x6570;&#x503C;&#x548C;&#x5217;&#x53F7;&#x4E0E;COO&#x4E00;&#x81F4;&#xFF0C;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x4EE5;&#x53CA;&#x5176;&#x5217;&#x53F7;&#x3002;&#x5982;&#x4E0A;&#x56FE;&#x4E2D;&#xFF0C;&#x7B2C;&#x4E00;&#x884C;&#x5143;&#x7D20;1&#x662F;0&#x504F;&#x79FB;&#xFF0C;&#x7B2C;&#x4E8C;&#x884C;&#x5143;&#x7D20;2&#x662F;2&#x504F;&#x79FB;&#xFF0C;&#x7B2C;&#x4E09;&#x884C;&#x5143;&#x7D20;5&#x662F;4&#x504F;&#x79FB;&#xFF0C;&#x7B2C;4&#x884C;&#x5143;&#x7D20;6&#x662F;7&#x504F;&#x79FB;&#x3002;&#x5728;&#x884C;&#x504F;&#x79FB;&#x7684;&#x6700;&#x540E;&#x8865;&#x4E0A;&#x77E9;&#x9635;&#x603B;&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#xFF0C;&#x672C;&#x4F8B;&#x4E2D;&#x662F;9&#x3002;</p>
<p>[3]&#x601D;&#x8003;&#xFF1A;<a href="http://blog.csdn.net/tenghui0425/article/details/23838535" target="_blank" rel="external">&#x901A;&#x7528;&#x7684;&#x5DE5;&#x5382;&#x7C7B;</a>&#xFF0C;@tenfyzhong</p>
<p>ShawnXiao@baidu</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="https://mlnote.com/2016/10/05/a-guide-to-xgboost-A-Scalable-Tree-Boosting-System/" data-id="cj1auemq7000pvslp2pe64ksu" class="article-share-link">分享到</a><div class="tags"><a href="/tags/gbdt/">gbdt</a><a href="/tags/xgboost/">xgboost</a></div><div class="post-nav"><a href="/2016/10/29/xgboost-code-review-with-paper/" class="pre">XGboost核心源码阅读</a><a href="/2016/10/02/gradient-boosting-decision-tree-2/" class="next">Gradient Boosting Decision Tree[下篇]</a></div><div data-thread-key="2016/10/05/a-guide-to-xgboost-A-Scalable-Tree-Boosting-System/" data-title="XGboost: A Scalable Tree Boosting System论文及源码导读" data-url="https://mlnote.com/2016/10/05/a-guide-to-xgboost-A-Scalable-Tree-Boosting-System/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2016/10/05/a-guide-to-xgboost-A-Scalable-Tree-Boosting-System/" data-title="XGboost: A Scalable Tree Boosting System论文及源码导读" data-url="https://mlnote.com/2016/10/05/a-guide-to-xgboost-A-Scalable-Tree-Boosting-System/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="https://mlnote.com"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/其他/">其他</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/机器学习/">机器学习</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/gbRank/" style="font-size: 15px;">gbRank</a> <a href="/tags/user-targeting/" style="font-size: 15px;">user targeting</a> <a href="/tags/Batch-Normalization/" style="font-size: 15px;">Batch Normalization</a> <a href="/tags/Caffe/" style="font-size: 15px;">Caffe</a> <a href="/tags/neural-networks/" style="font-size: 15px;">neural-networks</a> <a href="/tags/learning-to-rank/" style="font-size: 15px;">learning to rank</a> <a href="/tags/query-rewriting/" style="font-size: 15px;">query rewriting</a> <a href="/tags/semantic-matching/" style="font-size: 15px;">semantic matching</a> <a href="/tags/deep-learning/" style="font-size: 15px;">deep learning</a> <a href="/tags/neural-networks/" style="font-size: 15px;">neural networks</a> <a href="/tags/word-embedding/" style="font-size: 15px;">word embedding</a> <a href="/tags/SyntaxNet/" style="font-size: 15px;">SyntaxNet</a> <a href="/tags/CRF/" style="font-size: 15px;">CRF</a> <a href="/tags/fastBDT/" style="font-size: 15px;">fastBDT</a> <a href="/tags/gbdt/" style="font-size: 15px;">gbdt</a> <a href="/tags/lightGBM/" style="font-size: 15px;">lightGBM</a> <a href="/tags/advertisement/" style="font-size: 15px;">advertisement</a> <a href="/tags/logisticRank/" style="font-size: 15px;">logisticRank</a> <a href="/tags/gradient-boosting-framework/" style="font-size: 15px;">gradient boosting framework</a> <a href="/tags/huber/" style="font-size: 15px;">huber</a> <a href="/tags/LST/" style="font-size: 15px;">LST</a> <a href="/tags/LAD/" style="font-size: 15px;">LAD</a> <a href="/tags/classify/" style="font-size: 15px;">classify</a> <a href="/tags/RBMs/" style="font-size: 15px;">RBMs</a> <a href="/tags/xgboost/" style="font-size: 15px;">xgboost</a> <a href="/tags/model/" style="font-size: 15px;">model</a> <a href="/tags/bayes/" style="font-size: 15px;">bayes</a> <a href="/tags/code-mannar/" style="font-size: 15px;">code mannar</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/mathjex-公式/" style="font-size: 15px;">mathjex 公式</a> <a href="/tags/error-correction/" style="font-size: 15px;">error correction</a> <a href="/tags/spelling-correction/" style="font-size: 15px;">spelling correction</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/04/09/Reading-Notes-of-Error-Correction/">一些纠错相关的论文笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/20/Neural-Network-Batch-Normalization-and-Caffe-Code/">浅谈Batch Normalization及其Caffe实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/18/Reading-Notes-of-Word-Embedding/">Word Embedding札记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/10/SyntaxNet Neural-Models-of-Syntax/">简介语法分析开源神经网络SyntaxNet</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/18/The-realization-of-GBDT-in-LightGBM-and-FastDBT/">简述FastDBT和LightGBM中GBDT的实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/29/xgboost-code-review-with-paper/">XGboost核心源码阅读</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/05/a-guide-to-xgboost-A-Scalable-Tree-Boosting-System/">XGboost: A Scalable Tree Boosting System论文及源码导读</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/02/gradient-boosting-decision-tree-2/">Gradient Boosting Decision Tree[下篇]</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/24/gradient-boosting-decision-tree-1/">Gradient Boosting Decision Tree[上篇]</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/18/gbRank-logsitRank-from-up-to-bottom/">gbRank & logsitcRank自顶向下</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-comment-o"> 最近评论</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">水滴石穿.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'qiugen'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?ceebf89bb3d2a3b32aff294e42be4ed7";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>